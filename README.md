# Allure Single-File Custom Report Generator

This project generates a **single static Allure report** with advanced customizations, including a custom Base64 logo, favicon, celebration animation, and a custom report title. The report is automatically opened in your default browser after test execution.

---

## Features

- **Single-file HTML Allure report** for easy sharing and archiving.
- **Custom branding**: Add your own logo and favicon using Base64 images.
- **Celebration animation** on report open.
- **Custom report title** via configuration.
- **Automatic report opening** after execution.
- **Custom CSS and JS** injection for further personalization.

---

## Sample Screenshot

Below is a sample screenshot of the customized Allure report generated by this project:

[Sample Allure Report](reports/allure-report-20250830_185422.html) [sample video](reports/allure-report.mp4)
<img width="1920" height="1080" alt="Screenshot 2025-08-30 192254" src="https://github.com/user-attachments/assets/3b55c14c-faaa-45ca-8a32-660dd0417b02" />

---

## Project Structure

```
.
├── pom.xml
├── testng.xml
├── src/
│   ├── main/
│   │   └── java/
│   │       └── listner/
│   │           └── AllureTestListener.java
│   └── test/
│       └── resources/
│           ├── allure.properties
│           └── custom-logo-plugin/
│               ├── index.js
│               └── style.css
├── reports/
│   └── allure-report-*.html
├── allure-results/
│   └── *.json
└── screenshots/
    └── sample-report.png
```

---

## Prerequisites & Setup

### 1. Install Required Tools

- **Java 17+**
- **Maven**
- **Allure CLI** ([installation guide](https://docs.qameta.io/allure/#_installing_a_commandline))

### 2. Prepare Project Structure

Ensure your project contains the following folders and files:

```
src/
  test/
    resources/
      custom-logo-plugin/
        index.js
        style.css
```

### 3. Add Your Base64 Logo & Favicon

- Convert your logo and favicon images to Base64 format (e.g., using [base64-image.de](https://www.base64-image.de/)).
- In `index.js`, set your Base64 logo:

    ```js
    // src/test/resources/custom-logo-plugin/index.js
    window.addEventListener('DOMContentLoaded', function() {
      const logo = document.createElement('img');
      logo.src = "data:image/png;base64,PASTE_YOUR_BASE64_LOGO_HERE";
      logo.alt = "Custom Logo";
      logo.style.height = "40px";
      const brand = document.querySelector('.side-nav__brand');
      if (brand) {
        brand.innerHTML = '';
        brand.appendChild(logo);
      }
      // Celebration animation logic here (optional)
    });
    ```

- In your `allure.properties`, set your Base64 favicon:

    ```properties
    allure.report.favicon=data:image/png;base64,PASTE_YOUR_BASE64_FAVICON_HERE
    ```

### 4. Customize the Plugin

- Edit `index.js` to update the logo logic or add more custom JS (e.g., celebration animation).
- Edit `style.css` to style your logo, hide the default Allure logo, and add custom styles:

    ```css
    /* src/test/resources/custom-logo-plugin/style.css */
    .side-nav__brand svg,
    .side-nav__brand img:not([alt="Custom Logo"]) {
      display: none !important;
    }
    .side-nav__brand img[alt="Custom Logo"] {
      display: block;
      margin: 0 auto;
    }
    /* Add celebration animation styles here */
    ```

### 5. Reference the Plugin in Your Report Generation

- Ensure your report generation logic (e.g., in `AllureTestListener.java`) injects the custom JS and CSS into the generated HTML.
- The favicon logic should handle Base64 strings as shown above.
- The report title can be set in `allure.properties`:

    ```properties
    allure.report.title=Your Custom Report Title
    ```

### 6. Run and View the Report

- Run your tests with Maven:

    ```sh
    mvn clean test
    ```

- The report will be generated as a single HTML file in the `reports/` directory and will open automatically.

---

## How It Works

1. **Test Execution**: Run your tests with TestNG.
2. **Allure Results**: Test results are saved in `allure-results/`.
3. **Report Generation**:  
   The `AllureTestListener` triggers report generation on suite finish:
   - Runs the Allure CLI to generate a single-file HTML report.
   - Reads customization options from `allure.properties`.
   - Injects custom CSS, JS, logo, favicon, and title into the HTML.
   - Saves the final report in the `reports/` directory.
   - Opens the report automatically in your default browser.

---

## Customization

- **Logo, Footer & Animation**:  
  Customize `index.js` and `style.css` for your branding and effects.
- **Favicon**:  
  Set `allure.report.favicon` to a Base64 data URL in `allure.properties`.
- **Report Title**:  
  Set `allure.report.title` in `allure.properties`.

---

## Troubleshooting

- If the report does not open automatically, check the console output for errors.
- Ensure your Base64 images are valid and not truncated.
- Make sure the custom JS and CSS are correctly referenced and injected.

---

**Happy Testing!**
